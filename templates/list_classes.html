{% include 'partials/header.html' %}
{% include 'partials/navbar.html' %}

<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Ø§Ù„ØµÙÙˆÙ ÙˆØ§Ù„Ø´Ø¹Ø¨</h3>
    <a href="{{ url_for('add_class') }}" class="btn btn-success">â• Ø¥Ø¶Ø§ÙØ© ØµÙ Ø¬Ø¯ÙŠØ¯</a>
  </div>

  {% if classes %}
  <table class="table table-bordered table-striped">
    <thead class="table-light">
      <tr>
        <th>Ø§Ù„ØµÙ</th>
        <th>Ø§Ù„Ø´Ø¹Ø¨Ø©</th>
        <th>Ø§Ù„Ù…Ø¹Ù„Ù…</th>
        <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
      </tr>
    </thead>
    <tbody>
      {% for c in classes %}
      <tr id="row-{{ c.id }}">
        <td>{{ c.class_name }}</td>
        <td>{{ c.section }}</td>
        <td>{{ c.teacher_name }}</td>
        <td>
          <a href="{{ url_for('edit_class', class_id=c.id) }}" class="btn btn-sm btn-warning">âœï¸ ØªØ¹Ø¯ÙŠÙ„</a>
          <button class="btn btn-sm btn-danger" onclick="deleteClass({{ c.id }})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <div class="alert alert-info">âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØµÙÙˆÙ Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯.</div>
  {% endif %}
</div>

<script>
function deleteClass(id) {
  if (!confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ")) return;
  fetch(`/classes/delete/${id}`, {method: "POST"})
    .then(r => r.json())
    .then(data => {
      if (data.success) {
        document.getElementById(`row-${id}`).remove();
        alert("âœ… " + data.message);
      } else {
        alert("âš ï¸ " + data.message);
      }
    });
}
</script>

{% include 'partials/footer.html' %}
